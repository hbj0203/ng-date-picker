<!doctype html>
<html ng-app="demo" ng-strict-di>

<head>
	<meta charset="utf-8">
	<title>Angular Date Range Picker</title>
	<meta name="description" content="angular, directive, daypicker, date, day, daterange, date range picker,
          pure angular, day-picker, range-select, calendar, picker, date-range-picker, moment">
	<meta name="viewport" content="width=device-width">
	<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

	<!-- build:css({.tmp/serve,src}) styles/vendor.css -->
	<!-- bower:css -->
	<!-- run `gulp inject` to automatically populate bower styles dependencies -->
	<!-- endbower -->
	<!-- endbuild -->

	<!-- build:css({.tmp/serve,src}) styles/ob-daterangepicker.css -->
	<!-- inject:css -->
	<!-- css files will be automatically insert here -->
	<!-- endinject -->
	<!-- endbuild -->
</head>

<body>
	<!--[if lt IE 9]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->



	<!-- build:js(src) scripts/vendor.js -->
	<!-- bower:js -->
	<!-- run `gulp inject` to automatically populate bower script dependencies -->
	<!-- endbower -->
	<!-- endbuild -->

	<!-- build:js({.tmp/serve,.tmp/partials}) scripts/ob-daterangepicker.js -->
	<!-- inject:js -->
	<!-- js files will be automatically insert here -->
	<!-- endinject -->

	<!-- inject:partials -->
	<!-- angular templates will be automatically converted in js and inserted here -->
	<!-- endinject -->
	<!-- endbuild -->
	<div ng-controller="RangeController as range">
		<h1>日期时间组件（ng1.x）</h1>
		<h2>{{range.rangeFx.start.format("YYYY-MM-DD HH:mm:ss")}} - {{range.rangeFx.end.format("YYYY-MM-DD HH:mm:ss")}}</h2>
		<ng-datetime-picker 
			class="m-parent-box" 
			style="width: 280px;" 
			range="range.rangeFx"
			placeholder="请选择日期范围"
			format="YY-MM-DD HH:mm:ss"></ng-datetime-picker>
	</div>

	<script>
		angular.module('demo', ['ngDatetimeRangePicker'])
			.controller('RangeController', RangeCtrl);

		function getMonthDateRange(year, month) {
			let startDate = moment([year, month - 1]);
			let endDate = moment(startDate).endOf('month');
			return { start: startDate, end: endDate, startWeek: startDate.day(), startDate: startDate.date() };
		}
		for (var i = 1; i <= 12; i++) {
			// console.log(getMonthDateRange(2017, i));
		}
		function RangeCtrl() {
			var _this = this;
			//this.weekStart = 'su';
			this.dateRangeApi = {};
			this.dropsUp = false;
			this.opens = 'left';
			this.disabled = false;
			this.format = 'DD-MM-YYYY';
			this.autoApply = false;
			this.linked = true;
			this.calendarsAlwaysOn = true;
			this.postfix = '';

			this.rangeFx = {
				start: Date.now(),
				// end: moment().month(11).add(2, 'd').add(13, 'h').add(2, 'm').add(3, 's')
				end: null
			};

			this.range = {
				start: moment(),
				end: moment()
			};
			this.rangeWindow = null;

			this.ranges = [
				{
					name: 'Today',
					start: moment(),
					end: moment()
				},
				{
					name: 'Yesterday',
					start: moment().subtract(1, 'd'),
					end: moment().subtract(1, 'd')
				},
				{
					name: 'Current Month',
					start: moment().startOf('month'),
					end: moment()
				}
			];

			this.rangeApplied = function (start, end) {
				console.log(start, end);
			};

			this.setDateRange = function () {
				_this.dateRangeApi.setDateRange({
					start: moment(),
					end: moment().add(2, 'd')
				});
			};

			this.render = function (e) {
				console.log(this.calendarsAlwaysOn);
				if (e) {
					e.keyCode == 13 && this.dateRangeApi.render();
				} else {
					_this.dateRangeApi.render()
				}
			};

			this.setRange = function () {
				this.dateRangeApi.setDateRange({
					start: moment().subtract(1, 'd'),
					end: moment().subtract(1, 'd')
				});
			}
		}
	</script>

</body>

</html>